"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/auth/register";
exports.ids = ["pages/api/auth/register"];
exports.modules = {

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fregister&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fauth%2Fregister.ts&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fregister&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fauth%2Fregister.ts&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_auth_register_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/pages/api/auth/register.ts */ \"(api)/./src/pages/api/auth/register.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_auth_register_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_auth_register_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/auth/register\",\n        pathname: \"/api/auth/register\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_auth_register_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmF1dGglMkZyZWdpc3RlciZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnNyYyUyRnBhZ2VzJTJGYXBpJTJGYXV0aCUyRnJlZ2lzdGVyLnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQzZEO0FBQzdEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyw0REFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsNERBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdm9jYWxpZnQvPzI3YWMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3NyYy9wYWdlcy9hcGkvYXV0aC9yZWdpc3Rlci50c1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2F1dGgvcmVnaXN0ZXJcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hdXRoL3JlZ2lzdGVyXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fregister&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fauth%2Fregister.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/lib/database.ts":
/*!*****************************!*\
  !*** ./src/lib/database.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   databaseService: () => (/* binding */ databaseService),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _supabase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./supabase */ \"(api)/./src/lib/supabase.ts\");\n\n// Service pour interagir avec la base de donnÃ©es Supabase\nconst databaseService = {\n    // Utilisateurs\n    getUserById: async (id)=>{\n        const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"users\").select(\"*\").eq(\"id\", id).single();\n        if (error || !data) {\n            console.error(\"Erreur lors de la r\\xe9cup\\xe9ration de l'utilisateur:\", error);\n            return null;\n        }\n        return data;\n    },\n    getUserByEmail: async (email)=>{\n        const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"users\").select(\"*\").eq(\"email\", email).single();\n        if (error || !data) {\n            console.error(\"Erreur lors de la r\\xe9cup\\xe9ration de l'utilisateur:\", error);\n            return null;\n        }\n        return data;\n    },\n    createUser: async (userData)=>{\n        const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"users\").insert([\n            {\n                id: userData.id,\n                email: userData.email,\n                role: userData.role || \"USER\"\n            }\n        ]).select().single();\n        if (error) {\n            console.error(\"Erreur lors de la cr\\xe9ation de l'utilisateur:\", error);\n            return null;\n        }\n        return data;\n    },\n    // Quotas utilisateur\n    getUserQuota: async (userId)=>{\n        const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"user_quotas\").select(\"*\").eq(\"user_id\", userId).single();\n        if (error || !data) {\n            console.error(\"Erreur lors de la r\\xe9cup\\xe9ration du quota:\", error);\n            return null;\n        }\n        return data;\n    },\n    createUserQuota: async (userId, quotaData)=>{\n        const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"user_quotas\").insert([\n            {\n                user_id: userId,\n                max_files: quotaData?.max_files || 10,\n                max_file_size: quotaData?.max_file_size || 10485760,\n                daily_file_limit: quotaData?.daily_file_limit || 5\n            }\n        ]).select().single();\n        if (error) {\n            console.error(\"Erreur lors de la cr\\xe9ation du quota:\", error);\n            return null;\n        }\n        return data;\n    },\n    // Fichiers\n    getUserFiles: async (userId)=>{\n        const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"files\").select(\"*\").eq(\"user_id\", userId).order(\"created_at\", {\n            ascending: false\n        });\n        if (error) {\n            console.error(\"Erreur lors de la r\\xe9cup\\xe9ration des fichiers:\", error);\n            return [];\n        }\n        return data;\n    },\n    getFileById: async (fileId)=>{\n        const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"files\").select(\"*\").eq(\"id\", fileId).single();\n        if (error || !data) {\n            console.error(\"Erreur lors de la r\\xe9cup\\xe9ration du fichier:\", error);\n            return null;\n        }\n        return data;\n    },\n    createFile: async (fileData)=>{\n        const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"files\").insert([\n            fileData\n        ]).select().single();\n        if (error) {\n            console.error(\"Erreur lors de la cr\\xe9ation du fichier:\", error);\n            return null;\n        }\n        return data;\n    },\n    updateFile: async (fileId, fileData)=>{\n        const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"files\").update(fileData).eq(\"id\", fileId).select().single();\n        if (error) {\n            console.error(\"Erreur lors de la mise \\xe0 jour du fichier:\", error);\n            return null;\n        }\n        return data;\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (databaseService);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNMQyxNQUFNLENBQUMsS0FDUEMsRUFBRSxDQUFDLE1BQU1xQixRQUNUcEIsTUFBTTtRQUVULElBQUlKLFNBQVMsQ0FBQ0QsTUFBTTtZQUNsQk0sUUFBUUwsS0FBSyxDQUFDLG9EQUE4Q0E7WUFDNUQsT0FBTztRQUNUO1FBRUEsT0FBT0Q7SUFDVDtJQUVBMEIsWUFBWSxPQUFPQztRQUNqQixNQUFNLEVBQUUzQixJQUFJLEVBQUVDLEtBQUssRUFBRSxHQUFHLE1BQU1MLCtDQUFRQSxDQUNuQ00sSUFBSSxDQUFDLFNBQ0xTLE1BQU0sQ0FBQztZQUFDZ0I7U0FBUyxFQUNqQnhCLE1BQU0sR0FDTkUsTUFBTTtRQUVULElBQUlKLE9BQU87WUFDVEssUUFBUUwsS0FBSyxDQUFDLDZDQUEwQ0E7WUFDeEQsT0FBTztRQUNUO1FBRUEsT0FBT0Q7SUFDVDtJQUVBNEIsWUFBWSxPQUFPSCxRQUFnQkU7UUFDakMsTUFBTSxFQUFFM0IsSUFBSSxFQUFFQyxLQUFLLEVBQUUsR0FBRyxNQUFNTCwrQ0FBUUEsQ0FDbkNNLElBQUksQ0FBQyxTQUNMMkIsTUFBTSxDQUFDRixVQUNQdkIsRUFBRSxDQUFDLE1BQU1xQixRQUNUdEIsTUFBTSxHQUNORSxNQUFNO1FBRVQsSUFBSUosT0FBTztZQUNUSyxRQUFRTCxLQUFLLENBQUMsZ0RBQTZDQTtZQUMzRCxPQUFPO1FBQ1Q7UUFFQSxPQUFPRDtJQUNUO0FBQ0YsRUFBRTtBQUVGLGlFQUFlSCxlQUFlQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdm9jYWxpZnQvLi9zcmMvbGliL2RhdGFiYXNlLnRzP2MxYjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc3VwYWJhc2UgfSBmcm9tICcuL3N1cGFiYXNlJztcblxuLy8gVHlwZXMgcG91ciBsZXMgdXRpbGlzYXRldXJzIGV0IHF1b3Rhc1xuZXhwb3J0IGludGVyZmFjZSBVc2VyIHtcbiAgaWQ6IHN0cmluZztcbiAgZW1haWw6IHN0cmluZztcbiAgcm9sZTogJ1VTRVInIHwgJ0FETUlOJztcbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICB1cGRhdGVkX2F0OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVXNlclF1b3RhIHtcbiAgaWQ6IHN0cmluZztcbiAgdXNlcl9pZDogc3RyaW5nO1xuICBtYXhfZmlsZXM6IG51bWJlcjtcbiAgbWF4X2ZpbGVfc2l6ZTogbnVtYmVyO1xuICBkYWlseV9maWxlX2xpbWl0OiBudW1iZXI7XG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgdXBkYXRlZF9hdDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpbGUge1xuICBpZDogc3RyaW5nO1xuICB1c2VyX2lkOiBzdHJpbmc7XG4gIGZpbGVuYW1lOiBzdHJpbmc7XG4gIG9yaWdpbmFsX3VybDogc3RyaW5nO1xuICB0cmFuc2NyaXB0aW9uOiBzdHJpbmcgfCBudWxsO1xuICBzdW1tYXJ5OiBzdHJpbmcgfCBudWxsO1xuICB0cmFuc2xhdGlvbjogc3RyaW5nIHwgbnVsbDtcbiAgbGFuZ3VhZ2U6IHN0cmluZyB8IG51bGw7XG4gIHN0YXR1czogJ1VQTE9BREVEJyB8ICdQUk9DRVNTSU5HJyB8ICdUUkFOU0NSSUJFRCcgfCAnU1VNTUFSSVpFRCcgfCAnVFJBTlNMQVRFRCcgfCAnRVJST1InO1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIHVwZGF0ZWRfYXQ6IHN0cmluZztcbn1cblxuLy8gU2VydmljZSBwb3VyIGludGVyYWdpciBhdmVjIGxhIGJhc2UgZGUgZG9ubsOpZXMgU3VwYWJhc2VcbmV4cG9ydCBjb25zdCBkYXRhYmFzZVNlcnZpY2UgPSB7XG4gIC8vIFV0aWxpc2F0ZXVyc1xuICBnZXRVc2VyQnlJZDogYXN5bmMgKGlkOiBzdHJpbmcpOiBQcm9taXNlPFVzZXIgfCBudWxsPiA9PiB7XG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCd1c2VycycpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5lcSgnaWQnLCBpZClcbiAgICAgIC5zaW5nbGUoKTtcbiAgICBcbiAgICBpZiAoZXJyb3IgfHwgIWRhdGEpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0VycmV1ciBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlIGxcXCd1dGlsaXNhdGV1cjonLCBlcnJvcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGRhdGEgYXMgVXNlcjtcbiAgfSxcbiAgXG4gIGdldFVzZXJCeUVtYWlsOiBhc3luYyAoZW1haWw6IHN0cmluZyk6IFByb21pc2U8VXNlciB8IG51bGw+ID0+IHtcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3VzZXJzJylcbiAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgLmVxKCdlbWFpbCcsIGVtYWlsKVxuICAgICAgLnNpbmdsZSgpO1xuICAgIFxuICAgIGlmIChlcnJvciB8fCAhZGF0YSkge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGUgbFxcJ3V0aWxpc2F0ZXVyOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gZGF0YSBhcyBVc2VyO1xuICB9LFxuICBcbiAgY3JlYXRlVXNlcjogYXN5bmMgKHVzZXJEYXRhOiB7IGlkOiBzdHJpbmc7IGVtYWlsOiBzdHJpbmc7IHJvbGU/OiAnVVNFUicgfCAnQURNSU4nIH0pOiBQcm9taXNlPFVzZXIgfCBudWxsPiA9PiB7XG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCd1c2VycycpXG4gICAgICAuaW5zZXJ0KFt7XG4gICAgICAgIGlkOiB1c2VyRGF0YS5pZCxcbiAgICAgICAgZW1haWw6IHVzZXJEYXRhLmVtYWlsLFxuICAgICAgICByb2xlOiB1c2VyRGF0YS5yb2xlIHx8ICdVU0VSJ1xuICAgICAgfV0pXG4gICAgICAuc2VsZWN0KClcbiAgICAgIC5zaW5nbGUoKTtcbiAgICBcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0VycmV1ciBsb3JzIGRlIGxhIGNyw6lhdGlvbiBkZSBsXFwndXRpbGlzYXRldXI6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBkYXRhIGFzIFVzZXI7XG4gIH0sXG4gIFxuICAvLyBRdW90YXMgdXRpbGlzYXRldXJcbiAgZ2V0VXNlclF1b3RhOiBhc3luYyAodXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPFVzZXJRdW90YSB8IG51bGw+ID0+IHtcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3VzZXJfcXVvdGFzJylcbiAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgLmVxKCd1c2VyX2lkJywgdXNlcklkKVxuICAgICAgLnNpbmdsZSgpO1xuICAgIFxuICAgIGlmIChlcnJvciB8fCAhZGF0YSkge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZHUgcXVvdGE6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBkYXRhIGFzIFVzZXJRdW90YTtcbiAgfSxcbiAgXG4gIGNyZWF0ZVVzZXJRdW90YTogYXN5bmMgKHVzZXJJZDogc3RyaW5nLCBxdW90YURhdGE/OiBQYXJ0aWFsPFVzZXJRdW90YT4pOiBQcm9taXNlPFVzZXJRdW90YSB8IG51bGw+ID0+IHtcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3VzZXJfcXVvdGFzJylcbiAgICAgIC5pbnNlcnQoW3tcbiAgICAgICAgdXNlcl9pZDogdXNlcklkLFxuICAgICAgICBtYXhfZmlsZXM6IHF1b3RhRGF0YT8ubWF4X2ZpbGVzIHx8IDEwLFxuICAgICAgICBtYXhfZmlsZV9zaXplOiBxdW90YURhdGE/Lm1heF9maWxlX3NpemUgfHwgMTA0ODU3NjAsIC8vIDEwTUJcbiAgICAgICAgZGFpbHlfZmlsZV9saW1pdDogcXVvdGFEYXRhPy5kYWlseV9maWxlX2xpbWl0IHx8IDVcbiAgICAgIH1dKVxuICAgICAgLnNlbGVjdCgpXG4gICAgICAuc2luZ2xlKCk7XG4gICAgXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJldXIgbG9ycyBkZSBsYSBjcsOpYXRpb24gZHUgcXVvdGE6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBkYXRhIGFzIFVzZXJRdW90YTtcbiAgfSxcbiAgXG4gIC8vIEZpY2hpZXJzXG4gIGdldFVzZXJGaWxlczogYXN5bmMgKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxGaWxlW10+ID0+IHtcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ2ZpbGVzJylcbiAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgLmVxKCd1c2VyX2lkJywgdXNlcklkKVxuICAgICAgLm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xuICAgIFxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGVzIGZpY2hpZXJzOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGRhdGEgYXMgRmlsZVtdO1xuICB9LFxuICBcbiAgZ2V0RmlsZUJ5SWQ6IGFzeW5jIChmaWxlSWQ6IHN0cmluZyk6IFByb21pc2U8RmlsZSB8IG51bGw+ID0+IHtcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ2ZpbGVzJylcbiAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgLmVxKCdpZCcsIGZpbGVJZClcbiAgICAgIC5zaW5nbGUoKTtcbiAgICBcbiAgICBpZiAoZXJyb3IgfHwgIWRhdGEpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0VycmV1ciBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGR1IGZpY2hpZXI6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBkYXRhIGFzIEZpbGU7XG4gIH0sXG4gIFxuICBjcmVhdGVGaWxlOiBhc3luYyAoZmlsZURhdGE6IE9taXQ8RmlsZSwgJ2lkJyB8ICdjcmVhdGVkX2F0JyB8ICd1cGRhdGVkX2F0Jz4pOiBQcm9taXNlPEZpbGUgfCBudWxsPiA9PiB7XG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdmaWxlcycpXG4gICAgICAuaW5zZXJ0KFtmaWxlRGF0YV0pXG4gICAgICAuc2VsZWN0KClcbiAgICAgIC5zaW5nbGUoKTtcbiAgICBcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0VycmV1ciBsb3JzIGRlIGxhIGNyw6lhdGlvbiBkdSBmaWNoaWVyOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gZGF0YSBhcyBGaWxlO1xuICB9LFxuICBcbiAgdXBkYXRlRmlsZTogYXN5bmMgKGZpbGVJZDogc3RyaW5nLCBmaWxlRGF0YTogUGFydGlhbDxGaWxlPik6IFByb21pc2U8RmlsZSB8IG51bGw+ID0+IHtcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ2ZpbGVzJylcbiAgICAgIC51cGRhdGUoZmlsZURhdGEpXG4gICAgICAuZXEoJ2lkJywgZmlsZUlkKVxuICAgICAgLnNlbGVjdCgpXG4gICAgICAuc2luZ2xlKCk7XG4gICAgXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJldXIgbG9ycyBkZSBsYSBtaXNlIMOgIGpvdXIgZHUgZmljaGllcjonLCBlcnJvcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGRhdGEgYXMgRmlsZTtcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgZGF0YWJhc2VTZXJ2aWNlOyAiXSwibmFtZXMiOlsic3VwYWJhc2UiLCJkYXRhYmFzZVNlcnZpY2UiLCJnZXRVc2VyQnlJZCIsImlkIiwiZGF0YSIsImVycm9yIiwiZnJvbSIsInNlbGVjdCIsImVxIiwic2luZ2xlIiwiY29uc29sZSIsImdldFVzZXJCeUVtYWlsIiwiZW1haWwiLCJjcmVhdGVVc2VyIiwidXNlckRhdGEiLCJpbnNlcnQiLCJyb2xlIiwiZ2V0VXNlclF1b3RhIiwidXNlcklkIiwiY3JlYXRlVXNlclF1b3RhIiwicXVvdGFEYXRhIiwidXNlcl9pZCIsIm1heF9maWxlcyIsIm1heF9maWxlX3NpemUiLCJkYWlseV9maWxlX2xpbWl0IiwiZ2V0VXNlckZpbGVzIiwib3JkZXIiLCJhc2NlbmRpbmciLCJnZXRGaWxlQnlJZCIsImZpbGVJZCIsImNyZWF0ZUZpbGUiLCJmaWxlRGF0YSIsInVwZGF0ZUZpbGUiLCJ1cGRhdGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/lib/database.ts\n");

/***/ }),

/***/ "(api)/./src/lib/supabase.ts":
/*!*****************************!*\
  !*** ./src/lib/supabase.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AUDIO_BUCKET_NAME: () => (/* binding */ AUDIO_BUCKET_NAME),\n/* harmony export */   deleteAudioFile: () => (/* binding */ deleteAudioFile),\n/* harmony export */   getAudioFileUrl: () => (/* binding */ getAudioFileUrl),\n/* harmony export */   signIn: () => (/* binding */ signIn),\n/* harmony export */   signInWithMagicLink: () => (/* binding */ signInWithMagicLink),\n/* harmony export */   signOut: () => (/* binding */ signOut),\n/* harmony export */   signUp: () => (/* binding */ signUp),\n/* harmony export */   supabase: () => (/* binding */ supabase),\n/* harmony export */   uploadAudioFile: () => (/* binding */ uploadAudioFile)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__);\n\n// Validation des variables d'environnement\nif (false) {}\nif (false) {}\n// CrÃ©ation du client Supabase\nconst supabaseUrl = \"https://hcnlggrgzptoahwiirlv.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhjbmxnZ3JnenB0b2Fod2lpcmx2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDcwNTg5NzEsImV4cCI6MjA2MjYzNDk3MX0.m57cqT8rR6X9W0l8lpFAhHoJzeRZo7xmasSCbzU3qME\";\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\n// Constantes pour les buckets de storage\nconst AUDIO_BUCKET_NAME = \"audio-files\";\n// Fonctions utilitaires pour l'authentification\nconst signUp = async (email, password)=>{\n    const { data, error } = await supabase.auth.signUp({\n        email,\n        password\n    });\n    return {\n        data,\n        error\n    };\n};\nconst signIn = async (email, password)=>{\n    const { data, error } = await supabase.auth.signInWithPassword({\n        email,\n        password\n    });\n    return {\n        data,\n        error\n    };\n};\nconst signInWithMagicLink = async (email)=>{\n    const { data, error } = await supabase.auth.signInWithOtp({\n        email\n    });\n    return {\n        data,\n        error\n    };\n};\nconst signOut = async ()=>{\n    const { error } = await supabase.auth.signOut();\n    return {\n        error\n    };\n};\n// Fonctions utilitaires pour le stockage de fichiers\nconst uploadAudioFile = async (file, userId)=>{\n    const fileExt = file.name.split(\".\").pop();\n    const fileName = `${userId}/${Date.now()}.${fileExt}`;\n    const { data, error } = await supabase.storage.from(AUDIO_BUCKET_NAME).upload(fileName, file);\n    return {\n        data,\n        error\n    };\n};\nconst getAudioFileUrl = (filePath)=>{\n    const { data } = supabase.storage.from(AUDIO_BUCKET_NAME).getPublicUrl(filePath);\n    return data.publicUrl;\n};\nconst deleteAudioFile = async (filePath)=>{\n    const { error } = await supabase.storage.from(AUDIO_BUCKET_NAME).remove([\n        filePath\n    ]);\n    return {\n        error\n    };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL3N1cGFiYXNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQW9EO0FBWXBELDJDQUEyQztBQUMzQyxJQUFJLEtBQXFDLEVBQUUsRUFFMUM7QUFFRCxJQUFJLEtBQTBDLEVBQUUsRUFFL0M7QUFFRCw4QkFBOEI7QUFDOUIsTUFBTU0sY0FBY0wsMENBQW9DO0FBQ3hELE1BQU1NLGtCQUFrQk4sa05BQXlDO0FBRTFELE1BQU1PLFdBQVdSLG1FQUFZQSxDQUFDTSxhQUFhQyxpQkFBZ0I7QUFFbEUseUNBQXlDO0FBQ2xDLE1BQU1FLG9CQUFvQixjQUFhO0FBRTlDLGdEQUFnRDtBQUN6QyxNQUFNQyxTQUFTLE9BQU9DLE9BQWVDO0lBQzFDLE1BQU0sRUFBRUMsSUFBSSxFQUFFQyxLQUFLLEVBQUUsR0FBRyxNQUFNTixTQUFTTyxJQUFJLENBQUNMLE1BQU0sQ0FBQztRQUNqREM7UUFDQUM7SUFDRjtJQUNBLE9BQU87UUFBRUM7UUFBTUM7SUFBTTtBQUN2QixFQUFDO0FBRU0sTUFBTUUsU0FBUyxPQUFPTCxPQUFlQztJQUMxQyxNQUFNLEVBQUVDLElBQUksRUFBRUMsS0FBSyxFQUFFLEdBQUcsTUFBTU4sU0FBU08sSUFBSSxDQUFDRSxrQkFBa0IsQ0FBQztRQUM3RE47UUFDQUM7SUFDRjtJQUNBLE9BQU87UUFBRUM7UUFBTUM7SUFBTTtBQUN2QixFQUFDO0FBRU0sTUFBTUksc0JBQXNCLE9BQU9QO0lBQ3hDLE1BQU0sRUFBRUUsSUFBSSxFQUFFQyxLQUFLLEVBQUUsR0FBRyxNQUFNTixTQUFTTyxJQUFJLENBQUNJLGFBQWEsQ0FBQztRQUN4RFI7SUFDRjtJQUNBLE9BQU87UUFBRUU7UUFBTUM7SUFBTTtBQUN2QixFQUFDO0FBRU0sTUFBTU0sVUFBVTtJQUNyQixNQUFNLEVBQUVOLEtBQUssRUFBRSxHQUFHLE1BQU1OLFNBQVNPLElBQUksQ0FBQ0ssT0FBTztJQUM3QyxPQUFPO1FBQUVOO0lBQU07QUFDakIsRUFBQztBQUVELHFEQUFxRDtBQUM5QyxNQUFNTyxrQkFBa0IsT0FBT0MsTUFBWUM7SUFDaEQsTUFBTUMsVUFBVUYsS0FBS0csSUFBSSxDQUFDQyxLQUFLLENBQUMsS0FBS0MsR0FBRztJQUN4QyxNQUFNQyxXQUFXLENBQUMsRUFBRUwsT0FBTyxDQUFDLEVBQUVNLEtBQUtDLEdBQUcsR0FBRyxDQUFDLEVBQUVOLFFBQVEsQ0FBQztJQUVyRCxNQUFNLEVBQUVYLElBQUksRUFBRUMsS0FBSyxFQUFFLEdBQUcsTUFBTU4sU0FBU3VCLE9BQU8sQ0FDM0NDLElBQUksQ0FBQ3ZCLG1CQUNMd0IsTUFBTSxDQUFDTCxVQUFVTjtJQUVwQixPQUFPO1FBQUVUO1FBQU1DO0lBQU07QUFDdkIsRUFBQztBQUVNLE1BQU1vQixrQkFBa0IsQ0FBQ0M7SUFDOUIsTUFBTSxFQUFFdEIsSUFBSSxFQUFFLEdBQUdMLFNBQVN1QixPQUFPLENBQzlCQyxJQUFJLENBQUN2QixtQkFDTDJCLFlBQVksQ0FBQ0Q7SUFFaEIsT0FBT3RCLEtBQUt3QixTQUFTO0FBQ3ZCLEVBQUM7QUFFTSxNQUFNQyxrQkFBa0IsT0FBT0g7SUFDcEMsTUFBTSxFQUFFckIsS0FBSyxFQUFFLEdBQUcsTUFBTU4sU0FBU3VCLE9BQU8sQ0FDckNDLElBQUksQ0FBQ3ZCLG1CQUNMOEIsTUFBTSxDQUFDO1FBQUNKO0tBQVM7SUFFcEIsT0FBTztRQUFFckI7SUFBTTtBQUNqQixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdm9jYWxpZnQvLi9zcmMvbGliL3N1cGFiYXNlLnRzPzA2ZTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJ1xuXG4vLyBEw6lmaW5pdGlvbiBkdSB0eXBlIGQnZW52aXJvbm5lbWVudCBwb3VyIGxlcyB2YXJpYWJsZXMgU3VwYWJhc2VcbmRlY2xhcmUgZ2xvYmFsIHtcbiAgbmFtZXNwYWNlIE5vZGVKUyB7XG4gICAgaW50ZXJmYWNlIFByb2Nlc3NFbnYge1xuICAgICAgTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMOiBzdHJpbmdcbiAgICAgIE5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZOiBzdHJpbmdcbiAgICB9XG4gIH1cbn1cblxuLy8gVmFsaWRhdGlvbiBkZXMgdmFyaWFibGVzIGQnZW52aXJvbm5lbWVudFxuaWYgKCFwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwpIHtcbiAgdGhyb3cgbmV3IEVycm9yKCdORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwgZXN0IG1hbnF1YW50Jylcbn1cblxuaWYgKCFwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSkge1xuICB0aHJvdyBuZXcgRXJyb3IoJ05FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIGVzdCBtYW5xdWFudCcpXG59XG5cbi8vIENyw6lhdGlvbiBkdSBjbGllbnQgU3VwYWJhc2VcbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMXG5jb25zdCBzdXBhYmFzZUFub25LZXkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWVxuXG5leHBvcnQgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlQW5vbktleSlcblxuLy8gQ29uc3RhbnRlcyBwb3VyIGxlcyBidWNrZXRzIGRlIHN0b3JhZ2VcbmV4cG9ydCBjb25zdCBBVURJT19CVUNLRVRfTkFNRSA9ICdhdWRpby1maWxlcydcblxuLy8gRm9uY3Rpb25zIHV0aWxpdGFpcmVzIHBvdXIgbCdhdXRoZW50aWZpY2F0aW9uXG5leHBvcnQgY29uc3Qgc2lnblVwID0gYXN5bmMgKGVtYWlsOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcpID0+IHtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5zaWduVXAoe1xuICAgIGVtYWlsLFxuICAgIHBhc3N3b3JkXG4gIH0pXG4gIHJldHVybiB7IGRhdGEsIGVycm9yIH1cbn1cblxuZXhwb3J0IGNvbnN0IHNpZ25JbiA9IGFzeW5jIChlbWFpbDogc3RyaW5nLCBwYXNzd29yZDogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguc2lnbkluV2l0aFBhc3N3b3JkKHtcbiAgICBlbWFpbCxcbiAgICBwYXNzd29yZFxuICB9KVxuICByZXR1cm4geyBkYXRhLCBlcnJvciB9XG59XG5cbmV4cG9ydCBjb25zdCBzaWduSW5XaXRoTWFnaWNMaW5rID0gYXN5bmMgKGVtYWlsOiBzdHJpbmcpID0+IHtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5zaWduSW5XaXRoT3RwKHtcbiAgICBlbWFpbFxuICB9KVxuICByZXR1cm4geyBkYXRhLCBlcnJvciB9XG59XG5cbmV4cG9ydCBjb25zdCBzaWduT3V0ID0gYXN5bmMgKCkgPT4ge1xuICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLnNpZ25PdXQoKVxuICByZXR1cm4geyBlcnJvciB9XG59XG5cbi8vIEZvbmN0aW9ucyB1dGlsaXRhaXJlcyBwb3VyIGxlIHN0b2NrYWdlIGRlIGZpY2hpZXJzXG5leHBvcnQgY29uc3QgdXBsb2FkQXVkaW9GaWxlID0gYXN5bmMgKGZpbGU6IEZpbGUsIHVzZXJJZDogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IGZpbGVFeHQgPSBmaWxlLm5hbWUuc3BsaXQoJy4nKS5wb3AoKVxuICBjb25zdCBmaWxlTmFtZSA9IGAke3VzZXJJZH0vJHtEYXRlLm5vdygpfS4ke2ZpbGVFeHR9YFxuICBcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2Uuc3RvcmFnZVxuICAgIC5mcm9tKEFVRElPX0JVQ0tFVF9OQU1FKVxuICAgIC51cGxvYWQoZmlsZU5hbWUsIGZpbGUpXG4gICAgXG4gIHJldHVybiB7IGRhdGEsIGVycm9yIH1cbn1cblxuZXhwb3J0IGNvbnN0IGdldEF1ZGlvRmlsZVVybCA9IChmaWxlUGF0aDogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IHsgZGF0YSB9ID0gc3VwYWJhc2Uuc3RvcmFnZVxuICAgIC5mcm9tKEFVRElPX0JVQ0tFVF9OQU1FKVxuICAgIC5nZXRQdWJsaWNVcmwoZmlsZVBhdGgpXG4gICAgXG4gIHJldHVybiBkYXRhLnB1YmxpY1VybFxufVxuXG5leHBvcnQgY29uc3QgZGVsZXRlQXVkaW9GaWxlID0gYXN5bmMgKGZpbGVQYXRoOiBzdHJpbmcpID0+IHtcbiAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2Uuc3RvcmFnZVxuICAgIC5mcm9tKEFVRElPX0JVQ0tFVF9OQU1FKVxuICAgIC5yZW1vdmUoW2ZpbGVQYXRoXSlcbiAgICBcbiAgcmV0dXJuIHsgZXJyb3IgfVxufSAiXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50IiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsIkVycm9yIiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkiLCJzdXBhYmFzZVVybCIsInN1cGFiYXNlQW5vbktleSIsInN1cGFiYXNlIiwiQVVESU9fQlVDS0VUX05BTUUiLCJzaWduVXAiLCJlbWFpbCIsInBhc3N3b3JkIiwiZGF0YSIsImVycm9yIiwiYXV0aCIsInNpZ25JbiIsInNpZ25JbldpdGhQYXNzd29yZCIsInNpZ25JbldpdGhNYWdpY0xpbmsiLCJzaWduSW5XaXRoT3RwIiwic2lnbk91dCIsInVwbG9hZEF1ZGlvRmlsZSIsImZpbGUiLCJ1c2VySWQiLCJmaWxlRXh0IiwibmFtZSIsInNwbGl0IiwicG9wIiwiZmlsZU5hbWUiLCJEYXRlIiwibm93Iiwic3RvcmFnZSIsImZyb20iLCJ1cGxvYWQiLCJnZXRBdWRpb0ZpbGVVcmwiLCJmaWxlUGF0aCIsImdldFB1YmxpY1VybCIsInB1YmxpY1VybCIsImRlbGV0ZUF1ZGlvRmlsZSIsInJlbW92ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/lib/supabase.ts\n");

/***/ }),

/***/ "(api)/./src/pages/api/auth/register.ts":
/*!****************************************!*\
  !*** ./src/pages/api/auth/register.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/supabase */ \"(api)/./src/lib/supabase.ts\");\n/* harmony import */ var _lib_database__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/database */ \"(api)/./src/lib/database.ts\");\n\n\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            error: \"M\\xe9thode non autoris\\xe9e\"\n        });\n    }\n    try {\n        const { email, password, fullName } = req.body;\n        if (!email || !password || !fullName) {\n            return res.status(400).json({\n                error: \"Email, mot de passe et nom complet sont requis\"\n            });\n        }\n        // 1. CrÃ©er l'utilisateur dans Supabase Auth\n        const { data: authData, error: authError } = await (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_0__.signUp)(email, password);\n        if (authError) {\n            return res.status(400).json({\n                error: authError.message\n            });\n        }\n        // VÃ©rifier que l'utilisateur a bien Ã©tÃ© crÃ©Ã©\n        if (!authData.user) {\n            return res.status(500).json({\n                error: \"Erreur lors de la cr\\xe9ation de l'utilisateur dans Supabase\"\n            });\n        }\n        // 2. CrÃ©er l'utilisateur dans notre base de donnÃ©es Supabase\n        const user = await _lib_database__WEBPACK_IMPORTED_MODULE_1__[\"default\"].createUser({\n            id: authData.user.id,\n            email: email\n        });\n        if (!user) {\n            return res.status(500).json({\n                error: \"Erreur lors de la cr\\xe9ation de l'utilisateur dans la base de donn\\xe9es\"\n            });\n        }\n        // 3. CrÃ©er un quota pour l'utilisateur\n        const quota = await _lib_database__WEBPACK_IMPORTED_MODULE_1__[\"default\"].createUserQuota(authData.user.id);\n        if (!quota) {\n            console.warn(`Impossible de crÃ©er un quota pour l'utilisateur ${authData.user.id}`);\n        }\n        return res.status(201).json({\n            message: \"Utilisateur cr\\xe9\\xe9 avec succ\\xe8s\",\n            user: {\n                id: user.id,\n                email: user.email\n            }\n        });\n    } catch (error) {\n        console.error(\"Erreur lors de la cr\\xe9ation du compte:\", error);\n        return res.status(500).json({\n            error: \"Une erreur est survenue lors de la cr\\xe9ation du compte\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL2F1dGgvcmVnaXN0ZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ3dDO0FBQ0s7QUFFOUIsZUFBZUUsUUFDNUJDLEdBQW1CLEVBQ25CQyxHQUFvQjtJQUVwQixJQUFJRCxJQUFJRSxNQUFNLEtBQUssUUFBUTtRQUN6QixPQUFPRCxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBd0I7SUFDL0Q7SUFFQSxJQUFJO1FBQ0YsTUFBTSxFQUFFQyxLQUFLLEVBQUVDLFFBQVEsRUFBRUMsUUFBUSxFQUFFLEdBQUdSLElBQUlTLElBQUk7UUFFOUMsSUFBSSxDQUFDSCxTQUFTLENBQUNDLFlBQVksQ0FBQ0MsVUFBVTtZQUNwQyxPQUFPUCxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUMxQkMsT0FBTztZQUNUO1FBQ0Y7UUFFQSw0Q0FBNEM7UUFDNUMsTUFBTSxFQUFFSyxNQUFNQyxRQUFRLEVBQUVOLE9BQU9PLFNBQVMsRUFBRSxHQUFHLE1BQU1mLHFEQUFNQSxDQUFDUyxPQUFPQztRQUVqRSxJQUFJSyxXQUFXO1lBQ2IsT0FBT1gsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFDMUJDLE9BQU9PLFVBQVVDLE9BQU87WUFDMUI7UUFDRjtRQUVBLDZDQUE2QztRQUM3QyxJQUFJLENBQUNGLFNBQVNHLElBQUksRUFBRTtZQUNsQixPQUFPYixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUMxQkMsT0FBTztZQUNUO1FBQ0Y7UUFFQSw2REFBNkQ7UUFDN0QsTUFBTVMsT0FBTyxNQUFNaEIsZ0VBQTBCLENBQUM7WUFDNUNrQixJQUFJTCxTQUFTRyxJQUFJLENBQUNFLEVBQUU7WUFDcEJWLE9BQU9BO1FBQ1Q7UUFFQSxJQUFJLENBQUNRLE1BQU07WUFDVCxPQUFPYixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUMxQkMsT0FBTztZQUNUO1FBQ0Y7UUFFQSx1Q0FBdUM7UUFDdkMsTUFBTVksUUFBUSxNQUFNbkIscUVBQStCLENBQUNhLFNBQVNHLElBQUksQ0FBQ0UsRUFBRTtRQUVwRSxJQUFJLENBQUNDLE9BQU87WUFDVkUsUUFBUUMsSUFBSSxDQUFDLENBQUMsZ0RBQWdELEVBQUVULFNBQVNHLElBQUksQ0FBQ0UsRUFBRSxDQUFDLENBQUM7UUFDcEY7UUFFQSxPQUFPZixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQzFCUyxTQUFTO1lBQ1RDLE1BQU07Z0JBQ0pFLElBQUlGLEtBQUtFLEVBQUU7Z0JBQ1hWLE9BQU9RLEtBQUtSLEtBQUs7WUFDbkI7UUFDRjtJQUNGLEVBQUUsT0FBT0QsT0FBTztRQUNkYyxRQUFRZCxLQUFLLENBQUMsNENBQXlDQTtRQUN2RCxPQUFPSixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQzFCQyxPQUFPO1FBQ1Q7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdm9jYWxpZnQvLi9zcmMvcGFnZXMvYXBpL2F1dGgvcmVnaXN0ZXIudHM/MDlhYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XG5pbXBvcnQgeyBzaWduVXAgfSBmcm9tICdAL2xpYi9zdXBhYmFzZSc7XG5pbXBvcnQgZGF0YWJhc2VTZXJ2aWNlIGZyb20gJ0AvbGliL2RhdGFiYXNlJztcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihcbiAgcmVxOiBOZXh0QXBpUmVxdWVzdCxcbiAgcmVzOiBOZXh0QXBpUmVzcG9uc2Vcbikge1xuICBpZiAocmVxLm1ldGhvZCAhPT0gJ1BPU1QnKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJyb3I6ICdNw6l0aG9kZSBub24gYXV0b3Jpc8OpZScgfSk7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHsgZW1haWwsIHBhc3N3b3JkLCBmdWxsTmFtZSB9ID0gcmVxLmJvZHk7XG5cbiAgICBpZiAoIWVtYWlsIHx8ICFwYXNzd29yZCB8fCAhZnVsbE5hbWUpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgIGVycm9yOiAnRW1haWwsIG1vdCBkZSBwYXNzZSBldCBub20gY29tcGxldCBzb250IHJlcXVpcydcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIDEuIENyw6llciBsJ3V0aWxpc2F0ZXVyIGRhbnMgU3VwYWJhc2UgQXV0aFxuICAgIGNvbnN0IHsgZGF0YTogYXV0aERhdGEsIGVycm9yOiBhdXRoRXJyb3IgfSA9IGF3YWl0IHNpZ25VcChlbWFpbCwgcGFzc3dvcmQpO1xuXG4gICAgaWYgKGF1dGhFcnJvcikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgZXJyb3I6IGF1dGhFcnJvci5tZXNzYWdlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBWw6lyaWZpZXIgcXVlIGwndXRpbGlzYXRldXIgYSBiaWVuIMOpdMOpIGNyw6nDqVxuICAgIGlmICghYXV0aERhdGEudXNlcikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgZXJyb3I6IFwiRXJyZXVyIGxvcnMgZGUgbGEgY3LDqWF0aW9uIGRlIGwndXRpbGlzYXRldXIgZGFucyBTdXBhYmFzZVwiXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyAyLiBDcsOpZXIgbCd1dGlsaXNhdGV1ciBkYW5zIG5vdHJlIGJhc2UgZGUgZG9ubsOpZXMgU3VwYWJhc2VcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgZGF0YWJhc2VTZXJ2aWNlLmNyZWF0ZVVzZXIoe1xuICAgICAgaWQ6IGF1dGhEYXRhLnVzZXIuaWQsXG4gICAgICBlbWFpbDogZW1haWxcbiAgICB9KTtcblxuICAgIGlmICghdXNlcikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgZXJyb3I6IFwiRXJyZXVyIGxvcnMgZGUgbGEgY3LDqWF0aW9uIGRlIGwndXRpbGlzYXRldXIgZGFucyBsYSBiYXNlIGRlIGRvbm7DqWVzXCJcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIDMuIENyw6llciB1biBxdW90YSBwb3VyIGwndXRpbGlzYXRldXJcbiAgICBjb25zdCBxdW90YSA9IGF3YWl0IGRhdGFiYXNlU2VydmljZS5jcmVhdGVVc2VyUXVvdGEoYXV0aERhdGEudXNlci5pZCk7XG5cbiAgICBpZiAoIXF1b3RhKSB7XG4gICAgICBjb25zb2xlLndhcm4oYEltcG9zc2libGUgZGUgY3LDqWVyIHVuIHF1b3RhIHBvdXIgbCd1dGlsaXNhdGV1ciAke2F1dGhEYXRhLnVzZXIuaWR9YCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcbiAgICAgIG1lc3NhZ2U6ICdVdGlsaXNhdGV1ciBjcsOpw6kgYXZlYyBzdWNjw6hzJyxcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgaWQ6IHVzZXIuaWQsXG4gICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsXG4gICAgICB9XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyZXVyIGxvcnMgZGUgbGEgY3LDqWF0aW9uIGR1IGNvbXB0ZTonLCBlcnJvcik7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIGVycm9yOiBcIlVuZSBlcnJldXIgZXN0IHN1cnZlbnVlIGxvcnMgZGUgbGEgY3LDqWF0aW9uIGR1IGNvbXB0ZVwiXG4gICAgfSk7XG4gIH1cbn0gIl0sIm5hbWVzIjpbInNpZ25VcCIsImRhdGFiYXNlU2VydmljZSIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJlbWFpbCIsInBhc3N3b3JkIiwiZnVsbE5hbWUiLCJib2R5IiwiZGF0YSIsImF1dGhEYXRhIiwiYXV0aEVycm9yIiwibWVzc2FnZSIsInVzZXIiLCJjcmVhdGVVc2VyIiwiaWQiLCJxdW90YSIsImNyZWF0ZVVzZXJRdW90YSIsImNvbnNvbGUiLCJ3YXJuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/auth/register.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fregister&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fauth%2Fregister.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();